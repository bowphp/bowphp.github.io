"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3893],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),d=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(i.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),s=d(n),c=r,k=s["".concat(i,".").concat(c)]||s[c]||m[c]||o;return n?a.createElement(k,l(l({ref:t},u),{},{components:n})):a.createElement(k,l({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=c;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[s]="string"==typeof e?e:r,l[1]=p;for(var d=2;d<o;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5313:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294);const r=()=>a.createElement(a.Fragment,null,a.createElement("h2",null,"Il manque quelque chose ?"),a.createElement("p",null,"Si vous rencontrez des probl\xe8mes avec la documentation ou si vous avez des suggestions pour am\xe9liorer la documentation ou le projet en g\xe9n\xe9ral, veuillez d\xe9poser une issue pour nous, ou envoyer un tweet mentionnant le compte Twitter"," ",a.createElement("a",{href:"https://twitter.com/@bowframework"},"@bowframework")," ou sur directement sur le"," ",a.createElement("a",{href:"https://github.com/bowphp/docs/issues"},"github"),"."))},5725:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>p,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=n(7462),r=(n(7294),n(3905)),o=n(5313);const l={id:"http-response",title:"\ud83d\udce6 HTTP Response"},p=void 0,i={unversionedId:"http-response",id:"version-4.x/http-response",title:"\ud83d\udce6 HTTP Response",description:"- Introduction",source:"@site/versioned_docs/version-4.x/responses.mdx",sourceDirName:".",slug:"/http-response",permalink:"/docs/http-response",draft:!1,editUrl:"https://crowdin.com/project/bowphp/fr",tags:[],version:"4.x",lastUpdatedBy:"Franck DAKIA",lastUpdatedAt:1673138992,formattedLastUpdatedAt:"8 janv. 2023",frontMatter:{id:"http-response",title:"\ud83d\udce6 HTTP Response"},sidebar:"docs",previous:{title:"\ud83d\ude80 HTTP Request",permalink:"/docs/http-request"},next:{title:"\ud83c\udfac HTTP Session",permalink:"/docs/http-session"}},d={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Envoy\xe9 une r\xe9ponse",id:"envoy\xe9-une-r\xe9ponse",level:2},{value:"Une chaine de caract\xe8re",id:"une-chaine-de-caract\xe8re",level:3},{value:"Une Collection et Un tableau ou un Object",id:"une-collection-et-un-tableau-ou-un-object",level:3},{value:"Un mod\xe8le BARRY",id:"un-mod\xe8le-barry",level:3},{value:"Modification de r\xe9ponse",id:"modification-de-r\xe9ponse",level:2},{value:"Modification du code d&#39;erreur",id:"modification-du-code-derreur",level:3},{value:"Ajouter une ent\xeate HTTP",id:"ajouter-une-ent\xeate-http",level:3},{value:"Envoyer un JSON",id:"envoyer-un-json",level:2},{value:"Protototype de la m\xe9thode <code>json</code>",id:"protototype-de-la-m\xe9thode-json",level:3},{value:"Exemple d&#39;envoye de JSON",id:"exemple-denvoye-de-json",level:3},{value:"Envoyer une r\xe9ponse depuis les vues",id:"envoyer-une-r\xe9ponse-depuis-les-vues",level:2},{value:"Protototype de la m\xe9thode <code>render</code>",id:"protototype-de-la-m\xe9thode-render",level:3},{value:"Exemple d&#39;envoye de vue",id:"exemple-denvoye-de-vue",level:3},{value:"T\xe9l\xe9charger un fichier",id:"t\xe9l\xe9charger-un-fichier",level:3},{value:"Protototype de la m\xe9thode <code>download</code>",id:"protototype-de-la-m\xe9thode-download",level:3},{value:"Exemple de t\xe9l\xe9charge",id:"exemple-de-t\xe9l\xe9charge",level:3},{value:"Redirection",id:"redirection",level:2},{value:"Redirection avec <code>to</code>",id:"redirection-avec-to",level:3},{value:"Prototype de <code>to</code>",id:"prototype-de-to",level:4},{value:"Redirection avec <code>back</code>",id:"redirection-avec-back",level:3},{value:"Prototype de <code>back</code>",id:"prototype-de-back",level:4},{value:"Redirection avec des informations",id:"redirection-avec-des-informations",level:3}],s={toc:u};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#introduction"},"Introduction")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#envoy%C3%A9-une-r%C3%A9ponse"},"Envoy\xe9 une r\xe9ponse"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#une-chaine-de-caract%C3%A8re"},"Une chaine de caract\xe8re")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#une-collection-et-un-tableau-ou-un-object"},"Une Collection et Un tableau ou un Object")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#un-mod%C3%A8le-barry"},"Un mod\xe8le BARRY")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#modification-de-r%C3%A9ponse"},"Modification de r\xe9ponse"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#modification-du-code-derreur"},"Modification du code d'erreur")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#ajouter-une-ent%C3%AAte-http"},"Ajouter une ent\xeate HTTP")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#envoyer-un-json"},"Envoyer un JSON"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#protototype-de-la-m%C3%A9thode-json"},"Protototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"a"},"json"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#exemple-denvoye-de-json"},"Exemple d'envoye de JSON")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#envoyer-une-r%C3%A9ponse-depuis-les-vues"},"Envoyer une r\xe9ponse depuis les vues"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#protototype-de-la-m%C3%A9thode-render"},"Protototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"a"},"render"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#exemple-denvoye-de-vue"},"Exemple d'envoye de vue")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#t%C3%A9l%C3%A9charger-un-fichier"},"T\xe9l\xe9charger un fichier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#protototype-de-la-m%C3%A9thode-download"},"Protototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"a"},"download"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#exemple-de-t%C3%A9l%C3%A9charge"},"Exemple de t\xe9l\xe9charge")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#redirection"},"Redirection"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#redirection-avec-to"},"Redirection avec ",(0,r.kt)("inlineCode",{parentName:"a"},"to")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#prototype-de-to"},"Prototype de ",(0,r.kt)("inlineCode",{parentName:"a"},"to"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#redirection-avec-back"},"Redirection avec ",(0,r.kt)("inlineCode",{parentName:"a"},"back")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#prototype-de-back"},"Prototype de ",(0,r.kt)("inlineCode",{parentName:"a"},"back"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#redirection-avec-des-informations"},"Redirection avec des informations"))))),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Tous les routes et contr\xf4leurs doivent retourner une r\xe9ponse \xe0 renvoyer \xe0 l'utilisateur. Bow fournit plusieurs fa\xe7ons diff\xe9rentes de renvoyer des r\xe9ponses. La r\xe9ponse la plus \xe9l\xe9mentaire est le retour d'une cha\xeene depuis une route ou un contr\xf4leur. Bow convertira automatiquement la cha\xeene en une r\xe9ponse HTTP compl\xe8te."),(0,r.kt)("h2",{id:"envoy\xe9-une-r\xe9ponse"},"Envoy\xe9 une r\xe9ponse"),(0,r.kt)("h3",{id:"une-chaine-de-caract\xe8re"},"Une chaine de caract\xe8re"),(0,r.kt)("p",null,"Une r\xe9ponse HTTP peut \xeatre une chaine de caract\xe8re."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/', function ()\n{\n  return \"Hello, world\";\n});\n")),(0,r.kt)("h3",{id:"une-collection-et-un-tableau-ou-un-object"},"Une Collection et Un tableau ou un Object"),(0,r.kt)("p",null,"Une r\xe9ponse HTTP peut \xeatre une instance de ",(0,r.kt)("a",{parentName:"p",href:"https://bowphp.com/api/master/Bow/Support/Collection.html"},(0,r.kt)("inlineCode",{parentName:"a"},"Bow\\Support\\Collection")),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/array', function ()\n{\n  return [10, 2, 12, 'name' => 'Dakia'];\n});\n\n$app->get('/collection', function ()\n{\n  return collect([10, 2, 12]);\n});\n\n$app->get('/object', function ()\n{\n  return (object) ['name' => 'Dakia'];\n});\n")),(0,r.kt)("h3",{id:"un-mod\xe8le-barry"},"Un mod\xe8le BARRY"),(0,r.kt)("p",null,"La r\xe9ponse HTTP peut \xeatre un ",(0,r.kt)("inlineCode",{parentName:"p"},"Model")," ou une ",(0,r.kt)("inlineCode",{parentName:"p"},"Collection")," de mod\xe8le, Bow la convertis directement en ",(0,r.kt)("inlineCode",{parentName:"p"},"JSON"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use App\\Models\\User;\n\n$app->get('/', function ()\n{\n  $model = User::where('id', 1)->first();\n  \n  return $model;\n});\n")),(0,r.kt)("h2",{id:"modification-de-r\xe9ponse"},"Modification de r\xe9ponse"),(0,r.kt)("h3",{id:"modification-du-code-derreur"},"Modification du code d'erreur"),(0,r.kt)("p",null,"Il est tr\xe8s important d'ajouter les codes d'erreurs \xe0 votre r\xe9ponse HTTP si vous d\xe9veloppez un API RESTFUL. La m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"status")," vous permet de le faire."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use App\\Models\\User;\n\n$app->get('/', function ()\n{\n  $response = response();\n  \n  return $response->status(400);\n});\n")),(0,r.kt)("p",null,"Pour plus d'information sur les code HTTP. Consultez ce ",(0,r.kt)("a",{parentName:"p",href:"https://fr.wikipedia.org/wiki/Liste_des_codes_HTTP"},"lien"),"."),(0,r.kt)("p",null,"Si dans votre API, la requ\xeate a \xe9t\xe9 trait\xe9e avec succ\xe8s et que vous n'avez pas d\u2019information \xe0 renvoyer. Il est pr\xe9f\xe9rable de lui retourne un ",(0,r.kt)("strong",{parentName:"p"},"204")," qu'un ",(0,r.kt)("strong",{parentName:"p"},"200")," \ud83c\udf89."),(0,r.kt)("h3",{id:"ajouter-une-ent\xeate-http"},"Ajouter une ent\xeate HTTP"),(0,r.kt)("p",null,"Souvent vous serez amener \xe0 ajouter d'autre ent\xeate HTTP \xe0 votre r\xe9ponse HTTP. La m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"addHeader")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"withHeaders")," vous permet de le faire."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$response->addHeader('Content-Type', 'application/json');\n")),(0,r.kt)("p",null,"Nous pouvez ajouter plusieur ent\xeate en m\xeame temps:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$response->withHeaders([\n  'Content-Type' => 'application/json',\n  'X-Proto-Value' => 1\n]);\n")),(0,r.kt)("h2",{id:"envoyer-un-json"},"Envoyer un JSON"),(0,r.kt)("p",null,"Dans les applications REST (Api REST/RESTFUL) les informations sont g\xe9n\xe9ralement retourn\xe9s en JSON. Pour envoyer un information JSON au client, vous pouvez utiliser le help ",(0,r.kt)("inlineCode",{parentName:"p"},"json")," ou la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"json")," sur l'instance de ",(0,r.kt)("inlineCode",{parentName:"p"},"Bow\\Http\\Response"),"."),(0,r.kt)("h3",{id:"protototype-de-la-m\xe9thode-json"},"Protototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"h3"},"json")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$response->json($data, $code, $headers);\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$data"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Array"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"stdClass"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Iterable"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"JsonSerializable")),(0,r.kt)("td",{parentName:"tr",align:null},"Les donn\xe9es \xe0 s\xe9rialiser")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$code"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Int")),(0,r.kt)("td",{parentName:"tr",align:null},"Le code du status HTTP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$headers"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"Les ent\xeates \xe0 ajouter sur le r\xe9ponse")))),(0,r.kt)("h3",{id:"exemple-denvoye-de-json"},"Exemple d'envoye de JSON"),(0,r.kt)("p",null,"Exemple:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$data = ['message' => 'Hello, World'];\n\nreturn $response->json($data, $code = 200, [\n  'X-Proto-Value' => 1 // Juste un test\n]);\n")),(0,r.kt)("p",null,"Avec le HELPER:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$data = ['message' => 'Hello, World'];\n\nreturn json($data, 200, [\n  'X-Proto-Value' => 1 // Juste un test\n]);\n")),(0,r.kt)("p",null,"Ici, Bow ajout directement l'ent\xeate HTTP ",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Type")," \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"application/json"),", donc plus besoin de l'ajouter manuellement dans le ",(0,r.kt)("inlineCode",{parentName:"p"},"$headers"),"."),(0,r.kt)("h2",{id:"envoyer-une-r\xe9ponse-depuis-les-vues"},"Envoyer une r\xe9ponse depuis les vues"),(0,r.kt)("p",null,"Souvent vous pouvez utiliser un instance de ",(0,r.kt)("inlineCode",{parentName:"p"},"Bow\\Http\\Response")," pour faire le rendu de ",(0,r.kt)("a",{parentName:"p",href:"./views"},"vue")," via la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"render"),"."),(0,r.kt)("h3",{id:"protototype-de-la-m\xe9thode-render"},"Protototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"h3"},"render")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$response->render($name, $data, $code, $headers);\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"String")," - Le nom d'une vue \xe0 rendre")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$data"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Array")," - Les donn\xe9es \xe0 envoyer \xe0 la vue")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$code"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Int")," - Le code du status HTTP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$headers"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Array")," - Les ent\xeates \xe0 ajouter \xe0 la r\xe9ponse")))),(0,r.kt)("h3",{id:"exemple-denvoye-de-vue"},"Exemple d'envoye de vue"),(0,r.kt)("p",null,"Exemple:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$users = User::where('id', '!=', 2)->get();\n\nreturn $response->render('users', ['users' => $users], 200, [\n  'X-Proto-Value' => 1 // Juste un test\n]);\n")),(0,r.kt)("h3",{id:"t\xe9l\xe9charger-un-fichier"},"T\xe9l\xe9charger un fichier"),(0,r.kt)("p",null,"Souvent vous serez amener \xe0 mettre en place des syst\xe8mes de t\xe9l\xe9chargement de fichier zip ou image, encore vous allez faire des applications o\xf9 il faut s'authentifier avant de t\xe9l\xe9charge des fichiers du type dropbox. Bow offre un API simple via la classe ",(0,r.kt)("a",{parentName:"p",href:"https://bowphp.com/api/master/Bow/Http/Response.html"},(0,r.kt)("inlineCode",{parentName:"a"},"Bow\\Http\\Response"))," pour t\xe9l\xe9charger un fichier avec la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"download"),"."),(0,r.kt)("h3",{id:"protototype-de-la-m\xe9thode-download"},"Protototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"h3"},"download")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$response->download($file, $filename = null, $headers, $disposition = 'attachment');\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$file"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Le chemin absolu du fichier")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$filename"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Le nouveau du fichier par defaut est ",(0,r.kt)("strong",{parentName:"td"},"null"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$headers"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"Les ent\xeates \xe0 ajouter \xe0 la r\xe9ponse")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$disposition"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Indiquant si le contenu devrait \xeatre affich\xe9 en ligne dans le navigateur, c'est-\xe0-dire en tant que page Web, ou en pi\xe8ce jointe t\xe9l\xe9charg\xe9 et enregistr\xe9 localement.")))),(0,r.kt)("p",null,"Plus d'information sur l'ent\xeate ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/HTTP/Headers/Content-Disposition"},(0,r.kt)("inlineCode",{parentName:"a"},"Content-Disposition")),"."),(0,r.kt)("h3",{id:"exemple-de-t\xe9l\xe9charge"},"Exemple de t\xe9l\xe9charge"),(0,r.kt)("p",null,"Exemple:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$file = '/path/to/file.png';\n\nreturn $response->download($file, 'image.png');\n")),(0,r.kt)("h2",{id:"redirection"},"Redirection"),(0,r.kt)("p",null,"Vous serez certainement amener \xe0 faire des redirections vers d'autres ressources et cela en r\xe9alit\xe9 constitue une r\xe9ponse HTTP. Les m\xe9thodes ",(0,r.kt)("inlineCode",{parentName:"p"},"to")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"back")," (qui comme son nom l'indique permet de faire une revenir sur en arri\xe8re) de la classe ",(0,r.kt)("a",{parentName:"p",href:"https://bowphp.com/api/master/Bow/Http/Redirect.html"},(0,r.kt)("inlineCode",{parentName:"a"},"Bow\\Http\\Redirect")),"."),(0,r.kt)("h3",{id:"redirection-avec-to"},"Redirection avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"to")),(0,r.kt)("p",null,"La redirection avec ",(0,r.kt)("inlineCode",{parentName:"p"},"to")," permet de renvoyer l'utilisateur sur une autre la page."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"return redirect()->to($path);\n")),(0,r.kt)("h4",{id:"prototype-de-to"},"Prototype de ",(0,r.kt)("inlineCode",{parentName:"h4"},"to")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$path"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"L'URL de r\xe9direction")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"return redirect()->to('/users');\n")),(0,r.kt)("h3",{id:"redirection-avec-back"},"Redirection avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"back")),(0,r.kt)("p",null,"La redirection avec ",(0,r.kt)("inlineCode",{parentName:"p"},"back")," permet de renvoyer l'utilisateur sur la page pr\xe9c\xe9dente."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"return redirect()->back($status_code);\n")),(0,r.kt)("h4",{id:"prototype-de-back"},"Prototype de ",(0,r.kt)("inlineCode",{parentName:"h4"},"back")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"$status_code"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Int")," - Le code HTTP de la r\xe9ponse par defaut est \xe9gale \xe0 ",(0,r.kt)("inlineCode",{parentName:"td"},"302"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"return redirect()->back();\n")),(0,r.kt)("h3",{id:"redirection-avec-des-informations"},"Redirection avec des informations"),(0,r.kt)("p",null,"Vous pouvez aussi faire la redirection avec les informations envoy\xe9s par l'utilisateur et ceci avec la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"withInput"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"withFlash")," comme ceci:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},' return redirect()->back()->withInput();\n // Ou\n return redirect()->to("/home")->withInput();\n')),(0,r.kt)("p",null,"Avec un message flash"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"}," return redirect()->back()->withFlash('success', 'Papac');\n")),(0,r.kt)("p",null,"Notez que vous pouvez donner une tableau de valeur \xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"withInput")," qui sera une collection d'information \xe0 envoyer \xe0 utilisateur."),(0,r.kt)(o.Z,{mdxType:"SuggestionFeature"}))}m.isMDXComponent=!0}}]);