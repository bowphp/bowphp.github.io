"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3890],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>f});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=r.createContext({}),p=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=p(n),m=i,f=c["".concat(u,".").concat(m)]||c[m]||d[m]||a;return n?r.createElement(f,o(o({ref:t},s),{},{components:n})):r.createElement(f,o({ref:t},s))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=m;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[c]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6569:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var r=n(7462),i=(n(7294),n(3905));const a={id:"storage",title:"\ud83d\udcbf Stockage de fichier"},o=void 0,l={unversionedId:"en/storage",id:"en/storage",title:"\ud83d\udcbf Stockage de fichier",description:"- Introduction",source:"@site/docs/en/storage.md",sourceDirName:"en",slug:"/en/storage",permalink:"/docs/next/en/storage",draft:!1,editUrl:"https://crowdin.com/project/bowphp/fr",tags:[],version:"current",lastUpdatedBy:"Franck DAKIA",lastUpdatedAt:1672493455,formattedLastUpdatedAt:"31 d\xe9c. 2022",frontMatter:{id:"storage",title:"\ud83d\udcbf Stockage de fichier"}},u={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Fonctionnement",id:"fonctionnement",level:2},{value:"Syst\xe8me de fichier local",id:"syst\xe8me-de-fichier-local",level:3},{value:"Explication du concept",id:"explication-du-concept",level:4},{value:"Les services S3 et FTP",id:"les-services-s3-et-ftp",level:3},{value:"Manipulation des fichiers",id:"manipulation-des-fichiers",level:2},{value:"R\xe9cup\xe9rer le contenu d&#39;un fichier",id:"r\xe9cup\xe9rer-le-contenu-dun-fichier",level:3},{value:"Ajouter/Modifier le contenu d&#39;un fichier",id:"ajoutermodifier-le-contenu-dun-fichier",level:3},{value:"Ajouter du contenu au d\xe9but ou \xe0 la fin d&#39;un fichier",id:"ajouter-du-contenu-au-d\xe9but-ou-\xe0-la-fin-dun-fichier",level:3},{value:"Supprimer un fichier",id:"supprimer-un-fichier",level:3},{value:"Copier un fichier",id:"copier-un-fichier",level:3},{value:"Cr\xe9er un dossier",id:"cr\xe9er-un-dossier",level:3},{value:"Prototype",id:"prototype",level:4},{value:"V\xe9rifier si un fichier existe",id:"v\xe9rifier-si-un-fichier-existe",level:3},{value:"V\xe9rifier si le param\xeatre est un fichier",id:"v\xe9rifier-si-le-param\xeatre-est-un-fichier",level:3},{value:"V\xe9rifier si le param\xeatre est un dossier",id:"v\xe9rifier-si-le-param\xeatre-est-un-dossier",level:3},{value:"Obtenir le chemin absolu d&#39;un fichier ou dossier",id:"obtenir-le-chemin-absolu-dun-fichier-ou-dossier",level:3},{value:"Il manque quelque chose ?",id:"il-manque-quelque-chose-",level:2}],s={toc:p};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#introduction"},"Introduction")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#configuration"},"Configuration")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#fonctionnement"},"Fonctionnement"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#syst%C3%A8me-de-fichier-local"},"Syst\xe8me de fichier local"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#explication-du-concept"},"Explication du concept")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#les-services-s3-et-ftp"},"Les services S3 et FTP")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#manipulation-des-fichiers"},"Manipulation des fichiers"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#r%C3%A9cup%C3%A9rer-le-contenu-dun-fichier"},"R\xe9cup\xe9rer le contenu d'un fichier")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#ajoutermodifier-le-contenu-dun-fichier"},"Ajouter/Modifier le contenu d'un fichier")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#ajouter-du-contenu-au-d%C3%A9but-ou-%C3%A0-la-fin-dun-fichier"},"Ajouter du contenu au d\xe9but ou \xe0 la fin d'un fichier")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#supprimer-un-fichier"},"Supprimer un fichier")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#copier-un-fichier"},"Copier un fichier")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#cr%C3%A9er-un-dossier"},"Cr\xe9er un dossier"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#prototype"},"Prototype")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#v%C3%A9rifier-si-un-fichier-existe"},"V\xe9rifier si un fichier existe")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#v%C3%A9rifier-si-le-param%C3%AAtre-est-un-fichier"},"V\xe9rifier si le param\xeatre est un fichier")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#v%C3%A9rifier-si-le-param%C3%AAtre-est-un-dossier"},"V\xe9rifier si le param\xeatre est un dossier")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#obtenir-le-chemin-absolu-dun-fichier-ou-dossier"},"Obtenir le chemin absolu d'un fichier ou dossier"))))),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"Bow Framework int\xe8gre un syst\xe8me de gestion de fichier permettant de manipuler des fichiers avec une grande simplicit\xe9."),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"Le fichier de configuration du syst\xe8me de gestion de fichiers se trouve dans ",(0,i.kt)("inlineCode",{parentName:"p"},"config/resource.php"),"."),(0,i.kt)("h2",{id:"fonctionnement"},"Fonctionnement"),(0,i.kt)("p",null,"Vous avez la possibilit\xe9 d'utiliser les services ou travailler dans votre disque local. Les m\xe9thodes statiques ",(0,i.kt)("inlineCode",{parentName:"p"},"mount")," et ",(0,i.kt)("inlineCode",{parentName:"p"},"service")," permettent reciproquement de manipuler le syst\xe8me de disque et les services de stockage actuellement ",(0,i.kt)("inlineCode",{parentName:"p"},"ftp")," et ",(0,i.kt)("inlineCode",{parentName:"p"},"s3"),"."),(0,i.kt)("h3",{id:"syst\xe8me-de-fichier-local"},"Syst\xe8me de fichier local"),(0,i.kt)("p",null,"Pour g\xe9rer votre syst\xe8me de fichier local avec Bow Framework vous allez utiliser la m\xe9thode statique ",(0,i.kt)("inlineCode",{parentName:"p"},"mount"),"."),(0,i.kt)("h4",{id:"explication-du-concept"},"Explication du concept"),(0,i.kt)("p",null,"Nous appelerons les diff\xe9rents dossiers sp\xe9cifi\xe9s ",(0,i.kt)("inlineCode",{parentName:"p"},"disk"),"."),(0,i.kt)("p",null,"Consid\xe9rons la configuration suivante:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"'disk' =>[\n  'mount' => 'storage',\n  'path' => [\n    'storage' => __DIR__.'/../var/app',\n    'public' => __DIR__.'/../public',\n  ]\n];\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Vous pouvez sp\xe9cifier autant de disques que vous voulez.")),(0,i.kt)("p",null,"La classe ",(0,i.kt)("inlineCode",{parentName:"p"},"Storage")," expose la m\xe9thode statique ",(0,i.kt)("inlineCode",{parentName:"p"},"mount")," qui permet la manipulation de fichiers. La valeur pass\xe9e \xe0 ",(0,i.kt)("inlineCode",{parentName:"p"},"mount")," doit \xeatre un nom de disque valide sp\xe9cifi\xe9 dans la liste des ",(0,i.kt)("inlineCode",{parentName:"p"},"path"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},'use Bow\\Storage\\Storage;\n\nStorage::mount("public");\n// Ou\nStorage::mount();\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Si la m\xe9thode ",(0,i.kt)("inlineCode",{parentName:"p"},"mount")," est appel\xe9 sans param\xeatre, elle utilisera par d\xe9faut la valeur de la cl\xe9 ",(0,i.kt)("inlineCode",{parentName:"p"},"mount"),".")),(0,i.kt)("p",null,"Vous pouvez aussi utiliser le helper ",(0,i.kt)("inlineCode",{parentName:"p"},"mount()")," qui fonctionne exactement de la m\xeame mani\xe8re:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"mount('public');\n// Ou\nmount()->get('app.js');\n")),(0,i.kt)("h3",{id:"les-services-s3-et-ftp"},"Les services S3 et FTP"),(0,i.kt)("p",null,"Pour utiliser un syst\xe8me de stockage externe. Cela se fait via la m\xe9thode ",(0,i.kt)("inlineCode",{parentName:"p"},"service"),". Cette m\xe9thode, vous permet de s\xe9l\xe9ctionner le type de stockage externe que vous voulez utiliser. Vous trouverez la configuration n\xe9cessaire des services dans le fichier de configuration section ",(0,i.kt)("inlineCode",{parentName:"p"},"services")," du fichier ",(0,i.kt)("inlineCode",{parentName:"p"},"config/resource.php"),"."),(0,i.kt)("p",null,"Exemple avec le service ",(0,i.kt)("inlineCode",{parentName:"p"},"ftp"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$service = Storage::service('ftp');\n$service->get('app.js');\n")),(0,i.kt)("h2",{id:"manipulation-des-fichiers"},"Manipulation des fichiers"),(0,i.kt)("p",null,"Cette section d\xe9crit les diff\xe9rentes m\xe9thodes disponible pour la manipulation de fichiers et leur utilisation."),(0,i.kt)("p",null,"Supposons que nous avons le fichier ",(0,i.kt)("inlineCode",{parentName:"p"},"app.txt")," dans le disque ",(0,i.kt)("inlineCode",{parentName:"p"},"public"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-plain"},"// contenu du fichier app.txt\nHello, world\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Notez que ces m\xe9thodes (sauf la m\xe9thode ",(0,i.kt)("inlineCode",{parentName:"p"},"get"),") retournent respectivement ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," ou ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," en cas de succ\xe8s ou d'\xe9chec")),(0,i.kt)("h3",{id:"r\xe9cup\xe9rer-le-contenu-dun-fichier"},"R\xe9cup\xe9rer le contenu d'un fichier"),(0,i.kt)("p",null,"La m\xe9thode ",(0,i.kt)("inlineCode",{parentName:"p"},"get")," sert \xe0 recup\xe9rer le contenu d'un fichier. Elle prend comme param\xe8tre le nom du fichier."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n$content = $mount->get(\"app.txt\");\n\n// Avec un service\n$service = Storage::service('ftp');\n$content = $service->get(\"app.txt\");\n\necho $content;\n// => Hello, world\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("inlineCode",{parentName:"p"},"service")," et ",(0,i.kt)("inlineCode",{parentName:"p"},"mount")," utilise la m\xeame interface de manipulation. Ce qui veux dire que les m\xe9thodes disponibles pour ",(0,i.kt)("inlineCode",{parentName:"p"},"mount")," existe aussi pour ",(0,i.kt)("inlineCode",{parentName:"p"},"service"),".")),(0,i.kt)("h3",{id:"ajoutermodifier-le-contenu-dun-fichier"},"Ajouter/Modifier le contenu d'un fichier"),(0,i.kt)("p",null,"La m\xe9thode ",(0,i.kt)("inlineCode",{parentName:"p"},"put")," permet d'ajouter ou de modifier le contenu d'un fichier:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n$content = 'console.log(\"Hello, world\")';\n\n$mount->put('app.js', $content );\n")),(0,i.kt)("h3",{id:"ajouter-du-contenu-au-d\xe9but-ou-\xe0-la-fin-dun-fichier"},"Ajouter du contenu au d\xe9but ou \xe0 la fin d'un fichier"),(0,i.kt)("p",null,"Les m\xe9thodes ",(0,i.kt)("inlineCode",{parentName:"p"},"preprend")," et ",(0,i.kt)("inlineCode",{parentName:"p"},"append")," vous permettent d'ajouter respectivement du contenu au debut ou la fin d'un fichier:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\n$mount->prepend('app.txt', 'Contenu ajout\xe9 au d\xe9but');\n$mount->append('app.txt', 'Contenu ajout\xe9 \xe0 la fin');\n")),(0,i.kt)("h3",{id:"supprimer-un-fichier"},"Supprimer un fichier"),(0,i.kt)("p",null,"La m\xe9thode ",(0,i.kt)("inlineCode",{parentName:"p"},"delete")," permet de supprimer un fichier."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\n$mount->delete('app.js');\n")),(0,i.kt)("h3",{id:"copier-un-fichier"},"Copier un fichier"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\n$mount->copy('app.txt', 'sous-dossier/app.txt');\n")),(0,i.kt)("h3",{id:"cr\xe9er-un-dossier"},"Cr\xe9er un dossier"),(0,i.kt)("p",null,"Vous pouvez cr\xe9er un nouveau dossier \xe0 l'aide de la m\xe9thode ",(0,i.kt)("inlineCode",{parentName:"p"},"makeDirectory"),":"),(0,i.kt)("h4",{id:"prototype"},"Prototype"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\n$mount->makeDirectory($dirname, $mode = 0777, $recursive = false);\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"path"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"String")," - le dossier \xe0 cr\xe9er")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"mode"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Int")," - Le mode du dossier par d\xe9faut 777")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"recursive"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"Boolean")," - Permet de cr\xe9er r\xe9cursivement")))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\n$mount->makeDirectory('dossier');\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Notez que vous pouvez changer le mode du dossier et choisir de le cr\xe9er de mani\xe8re r\xe9cursif.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount->makeDirectory('chemin/vers/un/dossier', 777, true);\n")),(0,i.kt)("h3",{id:"v\xe9rifier-si-un-fichier-existe"},"V\xe9rifier si un fichier existe"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\nif ($mount->exists('app.txt')) {\n  echo $mount->get('app.txt');\n}\n")),(0,i.kt)("h3",{id:"v\xe9rifier-si-le-param\xeatre-est-un-fichier"},"V\xe9rifier si le param\xeatre est un fichier"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\nif ($mount->isFile('app.txt')) {\n  echo \"C'est un fichier\";\n}\n")),(0,i.kt)("h3",{id:"v\xe9rifier-si-le-param\xeatre-est-un-dossier"},"V\xe9rifier si le param\xeatre est un dossier"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\nif ($mount->isDirectory('nom_du_dossier')) {\n  echo \"C'est un dossier\";\n}\n")),(0,i.kt)("h3",{id:"obtenir-le-chemin-absolu-dun-fichier-ou-dossier"},"Obtenir le chemin absolu d'un fichier ou dossier"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$mount = mount('public');\n\n$path = $mount->path('app.txt');\n\necho $path;\n// => /chemin/absolu/vers/le/fichier/app.txt\n")),(0,i.kt)("h2",{id:"il-manque-quelque-chose-"},"Il manque quelque chose ?"),(0,i.kt)("p",null,"Si vous rencontrez des probl\xe8mes avec la documentation ou si vous avez des suggestions pour am\xe9liorer la documentation ou le projet en g\xe9n\xe9ral, veuillez d\xe9poser une issue pour nous, ou envoyer un tweet mentionnant le compte Twitter @BowFramework ou sur directement sur le ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/bowphp/docs/issues"},"github"),"."))}c.isMDXComponent=!0}}]);