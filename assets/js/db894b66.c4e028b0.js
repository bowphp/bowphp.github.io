"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[722],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>k});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),u=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,k=d["".concat(p,".").concat(m)]||d[m]||c[m]||l;return n?r.createElement(k,o(o({ref:t},s),{},{components:n})):r.createElement(k,o({ref:t},s))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[d]="string"==typeof e?e:a,o[1]=i;for(var u=2;u<l;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6144:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const l={id:"controleur",title:"\ud83d\udc68\ud83c\udffd\u200d\u2708\ufe0f Contr\xf4leurs"},o=void 0,i={unversionedId:"controleur",id:"controleur",title:"\ud83d\udc68\ud83c\udffd\u200d\u2708\ufe0f Contr\xf4leurs",description:"- Introduction",source:"@site/docs/controller.md",sourceDirName:".",slug:"/controleur",permalink:"/docs/next/controleur",draft:!1,editUrl:"https://crowdin.com/project/bowphp/fr",tags:[],version:"current",lastUpdatedBy:"Franck DAKIA",lastUpdatedAt:1672493455,formattedLastUpdatedAt:"31 d\xe9c. 2022",frontMatter:{id:"controleur",title:"\ud83d\udc68\ud83c\udffd\u200d\u2708\ufe0f Contr\xf4leurs"},sidebar:"docs",previous:{title:"\ud83d\udea6 Routing",permalink:"/docs/next/routing"},next:{title:"\ud83c\udfa8 Utiliser les vues",permalink:"/docs/next/views"}},p={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Contr\xf4leur basic",id:"contr\xf4leur-basic",level:2},{value:"D\xe9finir un contr\xf4leur",id:"d\xe9finir-un-contr\xf4leur",level:3},{value:"Contr\xf4leur et espaces de noms",id:"contr\xf4leur-et-espaces-de-noms",level:3},{value:"Contr\xf4leur et Middleware",id:"contr\xf4leur-et-middleware",level:3},{value:"Contr\xf4leur REST",id:"contr\xf4leur-rest",level:2},{value:"D\xe9finir un contr\xf4leur rest",id:"d\xe9finir-un-contr\xf4leur-rest",level:3},{value:"Utilisons notre contr\xf4leur REST",id:"utilisons-notre-contr\xf4leur-rest",level:3},{value:"Prototype de la m\xe9thode <code>rest</code>",id:"prototype-de-la-m\xe9thode-rest",level:4},{value:"Utilisation simple",id:"utilisation-simple",level:4},{value:"Utilisation avec les contraintes",id:"utilisation-avec-les-contraintes",level:4},{value:"Utilisation via un tableau comme action",id:"utilisation-via-un-tableau-comme-action",level:4},{value:"Ignore des m\xe9thodes",id:"ignore-des-m\xe9thodes",level:4},{value:"Url et Action",id:"url-et-action",level:4},{value:"Il manque quelque chose ?",id:"il-manque-quelque-chose-",level:2}],s={toc:u};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#introduction"},"Introduction")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#configuration"},"Configuration")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#contr%C3%B4leur-basic"},"Contr\xf4leur basic"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#d%C3%A9finir-un-contr%C3%B4leur"},"D\xe9finir un contr\xf4leur")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#contr%C3%B4leur-et-espaces-de-noms"},"Contr\xf4leur et espaces de noms")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#contr%C3%B4leur-et-middleware"},"Contr\xf4leur et Middleware")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#contr%C3%B4leur-rest"},"Contr\xf4leur REST"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#d%C3%A9finir-un-contr%C3%B4leur-rest"},"D\xe9finir un contr\xf4leur rest")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#utilisons-notre-contr%C3%B4leur-rest"},"Utilisons notre contr\xf4leur REST"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#prototype-de-la-m%C3%A9thode-rest"},"Prototype de la m\xe9thode ",(0,a.kt)("inlineCode",{parentName:"a"},"rest"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#utilisation-simple"},"Utilisation simple")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#utilisation-avec-les-contraintes"},"Utilisation avec les contraintes")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#utilisation-via-un-tableau-comme-action"},"Utilisation via un tableau comme action")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#ignore-des-m%C3%A9thodes"},"Ignore des m\xe9thodes")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#url-et-action"},"Url et Action")))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#il-manque-quelque-chose-"},"Il manque quelque chose ?"))),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"Les contr\xf4leurs sont des moyens pour simplifier l'organisation de vos projet."),(0,a.kt)("p",null,"Au lieu de d\xe9finir toute la logique de gestion des requ\xeate en tant que ",(0,a.kt)("inlineCode",{parentName:"p"},"closure")," dans les fichiers de routage, vous pouvez organiser ce comportement \xe0 l'aide de classe de contr\xf4leur. Les contr\xf4leurs peuvent regrouper la logique de traitement des requ\xeates associ\xe9e en une seule classe."),(0,a.kt)("p",null,"Les contr\xf4leurs sont stock\xe9s dans le r\xe9pertoire ",(0,a.kt)("inlineCode",{parentName:"p"},"app/Controllers"),"."),(0,a.kt)("script",{id:"asciicast-1r0hZPnP5wY5fCPcxNXtLTQ4r",src:"https://asciinema.org/a/1r0hZPnP5wY5fCPcxNXtLTQ4r.js","data-speed":"2","data-rows":"20",async:!0}),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("p",null,"Vous avez la possibilit\xe9 de modifier le ",(0,a.kt)("inlineCode",{parentName:"p"},"namespace")," des contr\xf4leurs et des middlewares. Pour ce faire ouvrez le fichier ",(0,a.kt)("inlineCode",{parentName:"p"},"app\\Kernel.php"),". La m\xe9thode ",(0,a.kt)("inlineCode",{parentName:"p"},"middlewares")," permet \xe0 Bow de savoir quel est le bon ",(0,a.kt)("inlineCode",{parentName:"p"},"namespace")," \xe0 ajouter sur le contr\xf4leur lors de l'execution de la r\xe9qu\xeate ou lors de la g\xe9n\xe9ration de contr\xf4leur ou de middleware par le lanceur de tache ",(0,a.kt)("inlineCode",{parentName:"p"},"php bow"),"."),(0,a.kt)("p",null,"Imaginez que vous avez une application pour la gestion des Bus d'une \xe9cole et que vous voulez grouper tout vos contr\xf4leurs dans le ",(0,a.kt)("inlineCode",{parentName:"p"},"App\\Bus\\Controllers"),". Alors comment faire \xe7a ?"),(0,a.kt)("p",null,"Voici le code que cela pourrait donn\xe9e:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},'# Dans le fichier `app\\Kernel.php`\npublic function namespaces()\n{\n  return [\n    "controller" => "App\\\\Bus\\\\Controllers",\n    ...\n  ]\n}\n')),(0,a.kt)("p",null,"Ensuite il faudra aussi changer un peu la configuration du lancer de tache:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"# Dans le fichier `bow`\n$command = new Bow\\Console\\Command(__DIR__);\n...\n$command->setControllerDirectory(__DIR__.'/app/Bus/Controllers');\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Visitez ce ",(0,a.kt)("a",{parentName:"p",href:"/docs/next/structure"},"lien")," pour plus d'information sur la personnalisation de la structure de l'application.")),(0,a.kt)("h2",{id:"contr\xf4leur-basic"},"Contr\xf4leur basic"),(0,a.kt)("h3",{id:"d\xe9finir-un-contr\xf4leur"},"D\xe9finir un contr\xf4leur"),(0,a.kt)("p",null,"Voici un exemple de classe de contr\xf4leur de base. Notez que le contr\xf4leur h\xe9rite de la classe ",(0,a.kt)("inlineCode",{parentName:"p"},"App\\Controllers\\Controller")," de base. Cette classe de base fournit quelques m\xe9thodes pratiques telles que la m\xe9thode du ",(0,a.kt)("inlineCode",{parentName:"p"},"render"),", qui peut \xeatre utilis\xe9e pour compiler une vue."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"namespace App\\Controllers;\n\nuse App\\Controllers\\Controller;\nuse App\\Models\\User;\n\nclass UserController extends Controller\n{\n  /**\n   * Afficher le profil pour l'utilisateur donn\xe9.\n   *\n   * @param int $id\n   * @return mixed\n   */\n  public function show($id)\n  {\n    return $this->render('user/profile', ['user' => User::findOrFail($id)]);\n  }\n}\n")),(0,a.kt)("p",null,"Vous pouvez d\xe9finir une route dans le fichier ",(0,a.kt)("inlineCode",{parentName:"p"},"routes/app.php")," vers cette action de contr\xf4leur comme suit:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('user/:id', 'UserController::show');\n")),(0,a.kt)("p",null,"D\xe9sormais, lorsqu'une demande correspond \xe0 l'URI de la route sp\xe9cifi\xe9e, la m\xe9thode ",(0,a.kt)("inlineCode",{parentName:"p"},"show")," de la classe ",(0,a.kt)("inlineCode",{parentName:"p"},"UserController")," sera ex\xe9cut\xe9e. Bien entendu, les param\xe8tres de la route seront \xe9galement transmis \xe0 la m\xe9thode."),(0,a.kt)("p",null,"Vous pouvez g\xe9n\xe9rer un contr\xf4leur en utilisant la commande ",(0,a.kt)("inlineCode",{parentName:"p"},"add:controller")," de ",(0,a.kt)("inlineCode",{parentName:"p"},"php bow"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"php bow add:controller UserController\n")),(0,a.kt)("h3",{id:"contr\xf4leur-et-espaces-de-noms"},"Contr\xf4leur et espaces de noms"),(0,a.kt)("p",null,"Il est tr\xe8s important de noter que nous n\u2019avons pas eu besoin de sp\xe9cifier le ",(0,a.kt)("inlineCode",{parentName:"p"},"namespace")," du contr\xf4leur complet lors de la d\xe9finition de la route du contr\xf4leur. \xc9tant donn\xe9 que ",(0,a.kt)("inlineCode",{parentName:"p"},"public/index.php")," charge vos fichiers de route dans un groupe de routage contenant le ",(0,a.kt)("inlineCode",{parentName:"p"},"namespace"),", nous avons uniquement sp\xe9cifi\xe9 la partie du nom de classe qui vient apr\xe8s la partie ",(0,a.kt)("inlineCode",{parentName:"p"},"App\\Controllers")," de le ",(0,a.kt)("inlineCode",{parentName:"p"},"namespace"),"."),(0,a.kt)("p",null,"Si vous choisissez d'imbriquer vos contr\xf4leurs plus profond\xe9ment dans le r\xe9pertoire ",(0,a.kt)("inlineCode",{parentName:"p"},"App\\Controllers"),", utilisez le nom de classe sp\xe9cifique relatif \xe0 le ",(0,a.kt)("inlineCode",{parentName:"p"},"namespace")," racine ",(0,a.kt)("inlineCode",{parentName:"p"},"App\\Controllers"),". Donc, si votre classe de contr\xf4leur compl\xe8te est ",(0,a.kt)("inlineCode",{parentName:"p"},"App\\Controllers\\Photo\\AdminController"),", vous devez enregistrer les routes sur le contr\xf4leur comme suit:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/foo', 'Photo\\AdminController::action');\n")),(0,a.kt)("p",null,"Vous pouvez g\xe9n\xe9rer un contr\xf4leur en utilisant la commande ",(0,a.kt)("inlineCode",{parentName:"p"},"add:controller")," de ",(0,a.kt)("inlineCode",{parentName:"p"},"php bow"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"php bow add:controller Photo/AdminController\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remarquez bien le nom du dossier c'est en camel case. Le framework cr\xe9\xe9ra le namespace appropri\xe9 pour la classe ",(0,a.kt)("inlineCode",{parentName:"p"},"AdminController")," et qui sera ",(0,a.kt)("inlineCode",{parentName:"p"},"namepsace App\\Controllers\\Photo;"),". Vous trouverez le controller dans un dossier ",(0,a.kt)("inlineCode",{parentName:"p"},"app/Controllers/Photo/AdminController"),".")),(0,a.kt)("p",null,"Plus d'information sur le ",(0,a.kt)("a",{parentName:"p",href:"/docs/next/routing"},"routing"),"."),(0,a.kt)("h3",{id:"contr\xf4leur-et-middleware"},"Contr\xf4leur et Middleware"),(0,a.kt)("p",null,"Les middlewares peuvent \xeatre assigner \xe0 la route du contr\xf4leur dans vos fichiers de route. Les middleware sont stock\xe9s dans le dossier ",(0,a.kt)("inlineCode",{parentName:"p"},"app\\Middlewares"),". Pour plus d'information sur les middlewares, visitez ce ",(0,a.kt)("a",{parentName:"p",href:"/docs/next/middleware"},"lien"),"."),(0,a.kt)("p",null,"Exemple:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('profile', 'UserController::show')->middleware('auth');\n")),(0,a.kt)("h2",{id:"contr\xf4leur-rest"},"Contr\xf4leur REST"),(0,a.kt)("p",null,"Les contr\xf4leur REST sont un moyen simple pour mettre en place un API Rest. Cette approche, vous permet de vous concentrez sur votre logique et laisser le Framework g\xe9r\xe9 le routage pour vous."),(0,a.kt)("h3",{id:"d\xe9finir-un-contr\xf4leur-rest"},"D\xe9finir un contr\xf4leur rest"),(0,a.kt)("p",null,"Pour d\xe9finir un nouveau contr\xf4leur Rest, nous devez utiliser le lancer de tache ",(0,a.kt)("inlineCode",{parentName:"p"},"php bow")," avec la commande ",(0,a.kt)("inlineCode",{parentName:"p"},"generate:resource")," dans votre console ou invite de commande \ud83d\ude0e."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"php bow generate:resource PetController\n")),(0,a.kt)("p",null,"Un contr\xf4leur nomm\xe9 ",(0,a.kt)("inlineCode",{parentName:"p"},"PetController")," sera donc cr\xe9\xe9. Ce qui fait \xe7a particularit\xe9 c'est qu'il y a d\xe9j\xe0 des m\xe9thodes pr\xe9d\xe9finir en lui et ces m\xe9thodes doivent rester telles quelles."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"namespace App\\Controllers;\n\nuse App\\Controllers\\Controller;\nuse App\\Models\\Pet;\n\nclass PetController extends Controller\n{\n  /**\n   * Point d'entr\xe9\n   *\n   * @return void\n   */\n  public function index()\n  {\n    // Codez Ici\n  }\n\n  /**\n   * Permet d'afficher la vue permettant de cr\xe9er une r\xe9source.\n   *\n   * @return void\n   */\n  public function create()\n  {\n    // Codez Ici\n  }\n\n  /**\n   * Permet d'ajouter une nouvelle r\xe9source dans la base d'information\n   *\n   * @return void\n   */\n  public function store()\n  {\n    // Codez Ici\n  }\n\n  /**\n   * Permet de r\xe9cup\xe9rer un information pr\xe9cise avec un identifiant.\n   *\n   * @param mixed $id\n   * @return void\n   */\n  public function show($id)\n  {\n    // Codez Ici\n  }\n\n  /**\n   * Mise \xe0 jour d'un ressource en utilisant param\xe8tre du GET\n   *\n   * @param mixed $id\n   * @return void\n   */\n  public function edit($id)\n  {\n    // Codez Ici\n  }\n\n  /**\n   * Mise \xe0 jour d'une r\xe9source\n   *\n   * @param mixed $id\n   * @return void\n   */\n  public function update($id)\n  {\n    // Codez Ici\n  }\n\n  /**\n   * Permet de supprimer une resource\n   *\n   * @param mixed $id\n   * @return void\n   */\n  public function destroy($id)\n  {\n    // Codez Ici\n  }\n}\n")),(0,a.kt)("h3",{id:"utilisons-notre-contr\xf4leur-rest"},"Utilisons notre contr\xf4leur REST"),(0,a.kt)("p",null,"Pour utiliser le contr\xf4leur Rest vous avez juste \xe0 utiliser le m\xe9thode ",(0,a.kt)("inlineCode",{parentName:"p"},"rest")," sur la variable globale ",(0,a.kt)("inlineCode",{parentName:"p"},"$app")," dans vos fichiers de ",(0,a.kt)("a",{parentName:"p",href:"/docs/next/routing"},"routing"),"."),(0,a.kt)("h4",{id:"prototype-de-la-m\xe9thode-rest"},"Prototype de la m\xe9thode ",(0,a.kt)("inlineCode",{parentName:"h4"},"rest")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$app->rest(url, action, where = []);\n")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"paramete"),(0,a.kt)("th",{parentName:"tr",align:null},"Type"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"url")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,a.kt)("inlineCode",{parentName:"td"},"Array")," - Le nom de la route")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"action")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"String")," -  Le nom de la route")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"where")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Array")," - Contrainte sur la varible ",(0,a.kt)("inlineCode",{parentName:"td"},"id"))))),(0,a.kt)("h4",{id:"utilisation-simple"},"Utilisation simple"),(0,a.kt)("p",null,"Et \xe7a donne ceci:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$app->rest('pets', 'PetController');\n")),(0,a.kt)("h4",{id:"utilisation-avec-les-contraintes"},"Utilisation avec les contraintes"),(0,a.kt)("p",null,"Avec une contrainte \xe7a donne ceci:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$app->rest('pets', 'PetController', ['id' => '\\d+']);\n")),(0,a.kt)("p",null,"Ici la contrainte s'applique sur tous les m\xe9thodes. Mais, vous avez aussi la possibilit\xe9 de restreindre les contraintes sur des m\xe9thodes comme ceci:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$app->rest('pets', 'PetController', [\n  'show' => ['id' => '\\d+'],\n  'edit' => ['id' => '[a-z]+'],\n]);\n")),(0,a.kt)("h4",{id:"utilisation-via-un-tableau-comme-action"},"Utilisation via un tableau comme action"),(0,a.kt)("p",null,"Dans le cas ou ",(0,a.kt)("inlineCode",{parentName:"p"},"action")," est un ",(0,a.kt)("inlineCode",{parentName:"p"},"array")," voici les cl\xe9s/valeurs possible."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$action = [\n  'controller' => 'PetController',\n  'ignores' => ['index', 'create'],\n];\n\n$app->rest('pets', $action, ['id' => '\\d+']);\n")),(0,a.kt)("h4",{id:"ignore-des-m\xe9thodes"},"Ignore des m\xe9thodes"),(0,a.kt)("p",null,"La valeur de ",(0,a.kt)("inlineCode",{parentName:"p"},"ignores")," sear une liste de m\xe9thode/url qui seront ignor\xe9es par le ",(0,a.kt)("inlineCode",{parentName:"p"},"routeur"),". Alors, dans l'exemple pr\xe9c\xe9dent les m\xe9thodes ",(0,a.kt)("inlineCode",{parentName:"p"},"index")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"create")," seront indisponibles."),(0,a.kt)("h4",{id:"url-et-action"},"Url et Action"),(0,a.kt)("p",null,"En considerant la d\xe9finition Rest suivant:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-php"},"$action = [\n  'controller' => 'PetController',\n  'ignores' => ['index', 'create'],\n];\n\n$app->rest('pets', $action, ['id' => '\\d+']);\n")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"URL"),(0,a.kt)("th",{parentName:"tr",align:null},"M\xe9thode HTTP"),(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la route"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/pets")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"GET")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"pets.index")),(0,a.kt)("td",{parentName:"tr",align:null},"Retourne la liste des pets")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/pets")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"POST")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"pets.store")),(0,a.kt)("td",{parentName:"tr",align:null},"Permet d'ajouter un autre pet")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/pets/:id")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"GET")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"pets.show")),(0,a.kt)("td",{parentName:"tr",align:null},"Afficher un seul pet")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/pets/:id")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"PUT/PATCH")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"pets.update")),(0,a.kt)("td",{parentName:"tr",align:null},"Permet de mettre \xe0 jour les informations d'un pet")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/pets/:id")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DELETE")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"pets.delete")),(0,a.kt)("td",{parentName:"tr",align:null},"Ceci va supprimer un pet")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/pets/create")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"GET")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"pets.create")),(0,a.kt)("td",{parentName:"tr",align:null},"Permet d'afficher le formulaire d'ajout")))),(0,a.kt)("h2",{id:"il-manque-quelque-chose-"},"Il manque quelque chose ?"),(0,a.kt)("p",null,"Si vous rencontrez des probl\xe8mes avec la documentation ou si vous avez des suggestions pour am\xe9liorer la documentation ou le projet en g\xe9n\xe9ral, veuillez d\xe9poser une issue pour nous, ou envoyer un tweet mentionnant le compte Twitter @BowFramework ou sur directement sur le ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/bowphp/docs/issues"},"github"),"."))}d.isMDXComponent=!0}}]);