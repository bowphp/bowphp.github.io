"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9314],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),s=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(u.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,f=p["".concat(u,".").concat(m)]||p[m]||d[m]||o;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[p]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9299:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=n(7462),a=(n(7294),n(3905));const o={id:"csrf-protection",title:"\ud83d\ude45\ud83c\udffd\u200d\u2642\ufe0f CSRF Protection"},i=void 0,l={unversionedId:"csrf-protection",id:"csrf-protection",title:"\ud83d\ude45\ud83c\udffd\u200d\u2642\ufe0f CSRF Protection",description:"- Introduction",source:"@site/docs/csrf.md",sourceDirName:".",slug:"/csrf-protection",permalink:"/docs/next/csrf-protection",draft:!1,editUrl:"https://crowdin.com/project/bowphp/fr",tags:[],version:"current",lastUpdatedBy:"Franck DAKIA",lastUpdatedAt:1672493455,formattedLastUpdatedAt:"31 d\xe9c. 2022",frontMatter:{id:"csrf-protection",title:"\ud83d\ude45\ud83c\udffd\u200d\u2642\ufe0f CSRF Protection"},sidebar:"docs",previous:{title:"\ud83d\udd10 Policier JWT Auth",permalink:"/docs/next/policier"},next:{title:"\ud83d\udcef Front-End",permalink:"/docs/next/frontend"}},u={},s=[{value:"Introduction",id:"introduction",level:2},{value:"Jetons CSRF &amp; JavaScript",id:"jetons-csrf--javascript",level:3},{value:"X-CSRF-TOKEN",id:"x-csrf-token",level:2},{value:"X-XSRF-TOKEN",id:"x-xsrf-token",level:2},{value:"Il manque quelque chose ?",id:"il-manque-quelque-chose-",level:2}],c={toc:s};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#introduction"},"Introduction"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#jetons-csrf--javascript"},"Jetons CSRF & JavaScript")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#x-csrf-token"},"X-CSRF-TOKEN")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#x-xsrf-token"},"X-XSRF-TOKEN")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#il-manque-quelque-chose-"},"Il manque quelque chose ?"))),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"Bow facilite la protection de votre application contre les attaques par contrefa\xe7on de requ\xeate intersite (CSRF). Les falsifications de requ\xeates intersites sont un type d'exploitation malveillante par lequel des commandes non autoris\xe9es sont effectu\xe9es pour le compte d'un utilisateur authentifi\xe9."),(0,a.kt)("p",null,"Bow g\xe9n\xe8re automatiquement un \"jeton\" CSRF pour chaque session utilisateur active g\xe9r\xe9e par l'application. Ce jeton est utilis\xe9 pour v\xe9rifier que l'utilisateur authentifi\xe9 est celui qui envoie les requ\xeates \xe0 l'application."),(0,a.kt)("p",null,"Chaque fois que vous d\xe9finissez un formulaire HTML dans votre application, vous devez inclure un champ de jeton CSRF masqu\xe9 dans le formulaire afin que le middleware de protection CSRF puisse valider la demande:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<form method="POST" action="/upload">\n  {{{ csrf_field() }}}\n  ...\n</form>\n')),(0,a.kt)("p",null,"Le middleware ",(0,a.kt)("inlineCode",{parentName:"p"},"App\\Middlewares\\ClientCsrfMiddleware::class"),", qui est inclus dans le groupe de middleware Web, v\xe9rifie automatiquement que le j\xe9ton dans l'entr\xe9e de la requ\xeate correspond au jeton stock\xe9 dans la session."),(0,a.kt)("h3",{id:"jetons-csrf--javascript"},"Jetons CSRF & JavaScript"),(0,a.kt)("p",null,"Lors de la cr\xe9ation d'applications pilot\xe9es par JavaScript, il est pratique que votre biblioth\xe8que HTTP JavaScript associe automatiquement le jeton CSRF \xe0 chaque requ\xeate sortante."),(0,a.kt)("p",null,"Le middleware CSRF est automatiquement ajout\xe9 lors de l'ex\xe9cution de chaque requ\xeate."),(0,a.kt)("h2",{id:"x-csrf-token"},"X-CSRF-TOKEN"),(0,a.kt)("p",null,"Outre la v\xe9rification du jeton CSRF en tant que param\xe8tre POST, le middleware ",(0,a.kt)("inlineCode",{parentName:"p"},"App\\Middlewares\\ClientCsrfMiddleware::class")," v\xe9rifie \xe9galement l\u2019en-t\xeate de demande ",(0,a.kt)("inlineCode",{parentName:"p"},"X-CSRF-TOKEN"),". Vous pouvez, par exemple, stocker le jeton dans une balise META HTML:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<meta name="csrf-token" content="{{ csrf_token() }}">\n')),(0,a.kt)("p",null,"Ensuite, une fois que vous avez cr\xe9\xe9 la balise ",(0,a.kt)("inlineCode",{parentName:"p"},"<meta>"),", vous pouvez demander \xe0 une biblioth\xe8que comme jQuery d'ajouter automatiquement le jeton \xe0 tous les en-t\xeates de requ\xeate. Cela fournit une protection CSRF simple et pratique pour vos applications bas\xe9es sur AJAX:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"$.ajaxSetup({\n  headers: {\n    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n  }\n});\n")),(0,a.kt)("h2",{id:"x-xsrf-token"},"X-XSRF-TOKEN"),(0,a.kt)("p",null,"Bow stock le j\xe9ton CSRF actuel dans un cookie ",(0,a.kt)("inlineCode",{parentName:"p"},"XSRF-TOKEN")," inclus dans chaque r\xe9ponse g\xe9n\xe9r\xe9e par le Framework. Vous pouvez utiliser la valeur de cookie pour d\xe9finir l'en-t\xeate de demande ",(0,a.kt)("inlineCode",{parentName:"p"},"X-XSRF-TOKEN"),"."),(0,a.kt)("p",null,"Ce cookie est principalement envoy\xe9 par commodit\xe9, car certains Frameworks et biblioth\xe8ques JavaScript, comme Angular et Axios, placent automatiquement sa valeur dans l'en-t\xeate X-XSRF-TOKEN."),(0,a.kt)("h2",{id:"il-manque-quelque-chose-"},"Il manque quelque chose ?"),(0,a.kt)("p",null,"Si vous rencontrez des probl\xe8mes avec la documentation ou si vous avez des suggestions pour am\xe9liorer la documentation ou le projet en g\xe9n\xe9ral, veuillez d\xe9poser une issue pour nous, ou envoyer un tweet mentionnant le compte Twitter @BowFramework ou sur directement sur le ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/bowphp/docs/issues"},"github"),"."))}p.isMDXComponent=!0}}]);