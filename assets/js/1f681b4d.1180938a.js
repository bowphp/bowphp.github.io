"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8487],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},m="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=u(n),c=r,k=m["".concat(o,".").concat(c)]||m[c]||s[c]||l;return n?a.createElement(k,p(p({ref:t},d),{},{components:n})):a.createElement(k,p({ref:t},d))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,p=new Array(l);p[0]=c;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[m]="string"==typeof e?e:r,p[1]=i;for(var u=2;u<l;u++)p[u]=n[u];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3542:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>p,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const l={id:"routing",title:"\ud83d\udea6 Routing"},p=void 0,i={unversionedId:"en/routing",id:"version-4.x/en/routing",title:"\ud83d\udea6 Routing",description:"- Introduction",source:"@site/versioned_docs/version-4.x/en/routing.md",sourceDirName:"en",slug:"/en/routing",permalink:"/docs/en/routing",draft:!1,editUrl:"https://crowdin.com/project/bowphp/fr",tags:[],version:"4.x",lastUpdatedBy:"Franck DAKIA",lastUpdatedAt:1672493455,formattedLastUpdatedAt:"31 d\xe9c. 2022",frontMatter:{id:"routing",title:"\ud83d\udea6 Routing"}},o={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Mappage d&#39;URL",id:"mappage-durl",level:2},{value:"Avec le m\xe9thode <code>route</code>",id:"avec-le-m\xe9thode-route",level:3},{value:"Liste des options",id:"liste-des-options",level:4},{value:"En utilisant les verbes HTTP comme m\xe9thode",id:"en-utilisant-les-verbes-http-comme-m\xe9thode",level:3},{value:"Liste des possibilit\xe9s",id:"liste-des-possibilit\xe9s",level:3},{value:"Les methods de mapping",id:"les-methods-de-mapping",level:2},{value:"Mapping avec <code>get</code>",id:"mapping-avec-get",level:3},{value:"Mapping avec <code>post</code>",id:"mapping-avec-post",level:3},{value:"Mapping avec <code>put</code>",id:"mapping-avec-put",level:3},{value:"Mapping avec <code>delete</code>",id:"mapping-avec-delete",level:3},{value:"Mapping avec <code>patch</code>",id:"mapping-avec-patch",level:3},{value:"Mapping avec <code>options</code>",id:"mapping-avec-options",level:3},{value:"Mapping multiple",id:"mapping-multiple",level:2},{value:"Mapping avec <code>match</code>",id:"mapping-avec-match",level:3},{value:"Mapping avec <code>any</code>",id:"mapping-avec-any",level:3},{value:"Mapping avec <code>prefix</code>",id:"mapping-avec-prefix",level:3},{value:"Personnalisation",id:"personnalisation",level:2},{value:"Capturer des variables dans l&#39;URL",id:"capturer-des-variables-dans-lurl",level:3},{value:"Ajouter des crit\xe8res, des restrictions sur les URLs",id:"ajouter-des-crit\xe8res-des-restrictions-sur-les-urls",level:3},{value:"Donner un nom aux routes",id:"donner-un-nom-aux-routes",level:3},{value:"Association de middleware",id:"association-de-middleware",level:3},{value:"La composition d&#39;action",id:"la-composition-daction",level:4},{value:"Il manque quelque chose ?",id:"il-manque-quelque-chose-",level:2}],d={toc:u};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#introduction"},"Introduction")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mappage-durl"},"Mappage d'URL"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#avec-le-m%C3%A9thode-route"},"Avec le m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"a"},"route")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#liste-des-options"},"Liste des options")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#en-utilisant-les-verbes-http-comme-m%C3%A9thode"},"En utilisant les verbes HTTP comme m\xe9thode")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#liste-des-possibilit%C3%A9s"},"Liste des possibilit\xe9s")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#les-methods-de-mapping"},"Les methods de mapping"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-get"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"get"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-post"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"post"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-put"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"put"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-delete"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"delete"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-patch"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"patch"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-options"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"options"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-multiple"},"Mapping multiple"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-match"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"match"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-any"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"any"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mapping-avec-prefix"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"a"},"prefix"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#personnalisation"},"Personnalisation"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#capturer-des-variables-dans-lurl"},"Capturer des variables dans l'URL")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#ajouter-des-crit%C3%A8res-des-restrictions-sur-les-urls"},"Ajouter des crit\xe8res, des restrictions sur les URLs")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#donner-un-nom-aux-routes"},"Donner un nom aux routes")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#association-de-middleware"},"Association de middleware"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#la-composition-daction"},"La composition d'action"))))))),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Le routing vous permet de maper une URL sur un controlleur ou une action particuli\xe8re.\nLe syst\xe8me de routing de Bow est greff\xe9 directement sur l'instance de l'application,\ndonc sur la variable ",(0,r.kt)("inlineCode",{parentName:"p"},"$app")," qui est une variable super global."),(0,r.kt)("p",null,"Les routes de l'application sont dans le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"app.php")," du dossier ",(0,r.kt)("inlineCode",{parentName:"p"},"routing"),"\nde votre application."),(0,r.kt)("script",{id:"asciicast-eFxk7E2J7ESjz1YYUIhgFSZq1",src:"https://asciinema.org/a/eFxk7E2J7ESjz1YYUIhgFSZq1.js","data-speed":"2","data-rows":"20",async:!0}),(0,r.kt)("h2",{id:"mappage-durl"},"Mappage d'URL"),(0,r.kt)("h3",{id:"avec-le-m\xe9thode-route"},"Avec le m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"h3"},"route")),(0,r.kt)("p",null,"C'est m\xe9thode permet de faire un mappage r\xe9lativement simple."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->route([\n  'path' => '/',\n  'method' => \"GET\",\n  'handler' => 'handler'\n]);\n")),(0,r.kt)("h4",{id:"liste-des-options"},"Liste des options"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"path"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Le parten d'url \xe0 matcher")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"method"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"m\xe9thode Http")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"handler"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"L'action \xe0 lancer")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"middleware"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"Middleware")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"where"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"Contrainte appliqu\xe9 sur l'URL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"Le nom de la route")))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"method")," correspond au verbe ",(0,r.kt)("inlineCode",{parentName:"p"},"http")," \xe0 associer \xe0 la route, soit ",(0,r.kt)("inlineCode",{parentName:"p"},"GET"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"POST"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"OPTIONS"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PATCH"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec une clourse")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->route([\n  'path' => '/',\n  'method' => \"GET\",\n  'handler' => function () {\n    return \"Hello, bow\";\n  }\n]);\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec le nom d'un controlleur.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->route([\n  'path' => '/',\n  'method' => \"GET\",\n  'handler' => 'HomeController::action'\n]);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Plus d'information sur les controlleurs ",(0,r.kt)("a",{parentName:"p",href:"./controllers"},"ici"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec le nom d'un controlleur et un middelware.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->route([\n  'path' => '/',\n  'method' => \"GET\",\n  'handler' => 'HomeController::show',\n  'middleware' => ['auth']\n]);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Plus d'information sur les middlewares ",(0,r.kt)("a",{parentName:"p",href:"./middleware"},"ici"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec le nom d'un controlleur, un middelware et une restriction.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->route([\n  'path' => '/:name',\n  'method' => \"GET\",\n  'handler' => 'HomeController::show',\n  'middleware' => ['auth'],\n  'where' => ['name' => '[a-z]+']\n]);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Plus d'information sur les restrictions ",(0,r.kt)("a",{parentName:"p",href:"#ajouter-des-criteres-des-restrictions-sur-les-urls"},"ici"))),(0,r.kt)("h3",{id:"en-utilisant-les-verbes-http-comme-m\xe9thode"},"En utilisant les verbes HTTP comme m\xe9thode"),(0,r.kt)("p",null,"Prototype des m\xe9thodes du routing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->[method](url, action);\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"method")," correspond au verbe ",(0,r.kt)("inlineCode",{parentName:"p"},"http")," \xe0 associer \xe0 la route, soit ",(0,r.kt)("inlineCode",{parentName:"p"},"GET"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"POST"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"OPTIONS"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PATCH")," \xe9crit en minuscule."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"url"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Le parten d'url a matcher")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"action"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"Closure ou Callable")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec une clourse")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/', function ()\n{\n  return 'hello world';\n});\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Une Closure est une fonction dite anonyme (",(0,r.kt)("a",{parentName:"p",href:"http://php.net/manual/fr/class.closure.php"},"Plus d'information")," sur le sujet).")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec une collection de fonction dans un tableau:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$callables = [];\n\n$callables[] = function ()\n{\n  echo 'hello world';\n\n  return true;\n};\n\n$callables[] = function ()\n{\n  echo 'Bien merci';\n};\n\n$app->get('/', $callables);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Notez que dans la premi\xe8re fonction il y a \xe0 la fin une instruction ",(0,r.kt)("inlineCode",{parentName:"p"},"return true"),", cette instruction est indispensable si vous voulez lancer la prochaine fonction. Alors ce qui veut dire que si c'est aussi un ",(0,r.kt)("inlineCode",{parentName:"p"},"return false")," la fonctione suivante ne sera pas ex\xe9cut\xe9e.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec le nom d'un controlleur")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->[method]('/', 'ClassController::action');\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Avec le nom d'un controlleur et un middelware")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->[method]('/', ['middleware' => 'ip', 'controller' => 'ClassController::action']);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"method")," correspond au verbe ",(0,r.kt)("inlineCode",{parentName:"p"},"http")," \xe0 associer \xe0 la route, soit ",(0,r.kt)("inlineCode",{parentName:"p"},"GET"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"POST"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"OPTIONS"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PATCH")," \xe9crit en minuscule.")),(0,r.kt)("h3",{id:"liste-des-possibilit\xe9s"},"Liste des possibilit\xe9s"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get($url, $action);\n$app->post($url, $action);\n$app->put($url, $action);\n$app->delete($url, $action);\n$app->option($url, $action);\n$app->patch($url, $action);\n")),(0,r.kt)("h2",{id:"les-methods-de-mapping"},"Les methods de mapping"),(0,r.kt)("p",null,"La mise en place du routage se faire donc via les m\xe9thodes suivants:"),(0,r.kt)("h3",{id:"mapping-avec-get"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"get")),(0,r.kt)("p",null,"Cette m\xe9thode permet de maper une URL \xe0 une requ\xeate de type ",(0,r.kt)("inlineCode",{parentName:"p"},"GET"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/', function ()\n{\n  return 'hello world';\n});\n")),(0,r.kt)("h3",{id:"mapping-avec-post"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"post")),(0,r.kt)("p",null,"Cette m\xe9thode permet de maper une URL \xe0 une requ\xeate de type ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->post('/', function ()\n{\n  return 'data posted';\n});\n")),(0,r.kt)("h3",{id:"mapping-avec-put"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"put")),(0,r.kt)("p",null,"Cette m\xe9thode permet de maper une URL \xe0 une requ\xeate de type ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->put('/', function ()\n{\n  // Code ici\n});\n")),(0,r.kt)("h3",{id:"mapping-avec-delete"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"delete")),(0,r.kt)("p",null,"Cette m\xe9thode permet de maper une URL \xe0 une requ\xeate de type ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->delete('/', function ()\n{\n  // Code ici\n});\n")),(0,r.kt)("h3",{id:"mapping-avec-patch"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"patch")),(0,r.kt)("p",null,"Cette m\xe9thode permet de maper une URL \xe0 une requ\xeate de type ",(0,r.kt)("inlineCode",{parentName:"p"},"PATCH"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->patch('/', function ()\n{\n  // Code ici\n});\n")),(0,r.kt)("h3",{id:"mapping-avec-options"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"options")),(0,r.kt)("p",null,"Cette m\xe9thode permet de maper une URL \xe0 une requ\xeate de type ",(0,r.kt)("inlineCode",{parentName:"p"},"OPTIONS"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->options('/', function ()\n{\n  // Code ici\n});\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Les m\xe9thodes ",(0,r.kt)("inlineCode",{parentName:"p"},"DELELTE"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PUT"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"PATCH")," ne sont pas supporter par le navigateur.")),(0,r.kt)("p",null,"Les navigateurs ne supportent pas cette m\xe9thode. Alors dans votre formulaire d'envoie, il faudra cr\xe9er un champs comme ceci:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'<input type="hidden" name="_method" value="DELETE">\n')),(0,r.kt)("p",null,"Ce qui aura pour but de permettre \xe0 Bow de comprendre votre requ\xeate et c'est valable pour PUT et PATCH."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Tout les m\xe9thodes d\xe9finir ci-dessus retourne l'instance de ",(0,r.kt)("inlineCode",{parentName:"p"},"Bow\\Router\\Route::class"),". (Plus d'information sur le ",(0,r.kt)("a",{parentName:"p",href:"https://bowphp.com/api/master/Bow/Router/Route.html"},(0,r.kt)("inlineCode",{parentName:"a"},"Bow\\Router\\Route::class")),")")),(0,r.kt)("h2",{id:"mapping-multiple"},"Mapping multiple"),(0,r.kt)("h3",{id:"mapping-avec-match"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"match")),(0,r.kt)("p",null,"Permet d'associer des m\xe9thodes ",(0,r.kt)("inlineCode",{parentName:"p"},"http")," sur l'url sp\xe9cifi\xe9."),(0,r.kt)("p",null,"Prototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->match(verbes, url, action);\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"verbes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"La liste des m\xe9thodes ",(0,r.kt)("inlineCode",{parentName:"td"},"http"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"url"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"L'URL de la route")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"action"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Array"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Closure")),(0,r.kt)("td",{parentName:"tr",align:null},"L'action \xe0 lancer")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->match(['GET', 'POST'], '/users', function ()\n{\n  // Code ici\n});\n")),(0,r.kt)("p",null,"Vous pourrez avoir un code qui faire ceci."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"use Bow\\Http\\Request;\n\n$app->match(['GET', 'POST'], '/users', function (Request $request)\n{\n  if ($request->isPost()) {\n    // code\n  } else {\n    // code\n  }\n});\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Plus d'information sur les ",(0,r.kt)("a",{parentName:"p",href:"./request"},"requ\xeates HTTP"),".")),(0,r.kt)("h3",{id:"mapping-avec-any"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"any")),(0,r.kt)("p",null,"Permet d'associer tout les m\xe9thodes ",(0,r.kt)("inlineCode",{parentName:"p"},"http")," sur l'URL sp\xe9cifier."),(0,r.kt)("p",null,"Prototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"any"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->any(url, action);\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"url"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"L'url de la route")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"action"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"Closure - L'action \xe0 lancer")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->any('/', function ()\n{\n  // Code ici\n});\n")),(0,r.kt)("h3",{id:"mapping-avec-prefix"},"Mapping avec ",(0,r.kt)("inlineCode",{parentName:"h3"},"prefix")),(0,r.kt)("p",null,"Souvent vous serez amener \xe0 grouper vos routes et effectuer un branchement simple pour bien orient\xe9 votre logique. Les URLs peuvent souvents se r\xe9p\xe9ter comme ceci:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('users', function ()\n{\n  // Code ici\n});\n\n$app->get('users/:id', function ($id)\n{\n  // Code ici\n});\n\n$app->get('users/:id/delete', function ($id)\n{\n  // Code ici\n});\n")),(0,r.kt)("p",null,"Dans ce cas nous avons ",(0,r.kt)("inlineCode",{parentName:"p"},"users")," qui se r\xe9p\xe9te plusieur fois. Comment bien organiser tout \xe7a ? La r\xe9ponse est le pr\xe9fixage de route. Alors la m\xe9thodes ",(0,r.kt)("inlineCode",{parentName:"p"},"prefix")," nous permet de grouper plusieur URLs."),(0,r.kt)("p",null,"Prototype de le m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"prefix"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->prefix(url, action);\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"url"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"l'URL \xe0 prefixer")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"action"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Closure")),(0,r.kt)("td",{parentName:"tr",align:null},"Cette fonction prendra en param\xe8tre l'instance de l'application")))),(0,r.kt)("p",null,"Donc pour r\xe9organiser le code pr\xe9c\xe9dent, il faudra faire comme suit:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->prefix('/users', function () use ($app)\n{\n  $app->get('/', function ()\n  {\n   // Code ici\n  });\n  $app->get('/:id', function ($id)\n  {\n   // Code ici\n  });\n  $app->get('/:id/delete', function ($id)\n  {\n   // Code ici\n  });\n});\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Notez qu'actuellement le pr\xe9fixage ne peut pas \xeatre imbriquer.")),(0,r.kt)("h2",{id:"personnalisation"},"Personnalisation"),(0,r.kt)("p",null,"Le routing vous permet aussi de personnaliser vos URLs. Voici la liste des possibilit\xe9s de personnalisation."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Capturer des variables dans l'URL"),(0,r.kt)("li",{parentName:"ul"},"Ajouter des crit\xe8res, des restrictions sur les URLs"),(0,r.kt)("li",{parentName:"ul"},"Donner un nom aux routes"),(0,r.kt)("li",{parentName:"ul"},"Association de middleware"),(0,r.kt)("li",{parentName:"ul"},"La composition d'action")),(0,r.kt)("p",null,"Pour faire la personnalisation il faut utiliser l'enchainement de m\xe9thode. Dans l'exemple qui suit nous allons utiliser la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"get"),"."),(0,r.kt)("h3",{id:"capturer-des-variables-dans-lurl"},"Capturer des variables dans l'URL"),(0,r.kt)("p",null,"Le routing vous permet de pouvoir capturer des variables dans URLs.\nPour le faire il faut imp\xe9rativement utiliser la notation ",(0,r.kt)("inlineCode",{parentName:"p"},":nom_variable"),".\nEnsuite la variable captur\xe9 sera pass\xe9e en param\xe8tre \xe0 l'action (fonction \xe0 ex\xe8cuter dans le cas o\xf9 l'url est valide)\nquelque soit le nombre de variable."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/:name', function ($name)\n{\n  return 'Bonjour ' . $name;\n});\n")),(0,r.kt)("h3",{id:"ajouter-des-crit\xe8res-des-restrictions-sur-les-urls"},"Ajouter des crit\xe8res, des restrictions sur les URLs"),(0,r.kt)("p",null,"Parlant de capture de variable, s\xe9curis\xe9 ces variables est primordial, alors le routing vous permet\naussi d'ajouter des validateurs sur le variable. C'est la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"where")," qui s'en occupe."),(0,r.kt)("p",null,"Prototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"where"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"where(name, rule);\n// ou\nwhere(array rules);\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Le nom de la variable")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"value"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Le critaire de validation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rules"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"Array")),(0,r.kt)("td",{parentName:"tr",align:null},"Tableau associatif dont la cl\xe9 est la varibale \xe0 s\xe9curiser et la valeur est le critaire de validation")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/:name', function ($name)\n{\n  return 'Bonjour ' . $name;\n})->where('name', '[a-z]+');\n\n// S'il y a plusieurs variables\n$callable = function ($name, $lastname, $number)\n{\n  return sprintf(\n    'Bonjour <b>%s %s</b>, votre num\xe9ro est %s.', $name, $lastname, $number\n  );\n};\n\n$app->get('/:name/:lastname/:number', $callable)\n  ->where([\n    'name' => '[a-z]+',\n    'lastname' => '[a-z]+',\n    'number' => '\\d+'\n  ]);\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Notez que ",(0,r.kt)("inlineCode",{parentName:"p"},"where")," est une m\xe9thode de l'instance ",(0,r.kt)("a",{parentName:"p",href:"https://bowphp.com/api/master/Bow/Router/Route.html"},(0,r.kt)("inlineCode",{parentName:"a"},"Bow\\Router\\Route")),".")),(0,r.kt)("h3",{id:"donner-un-nom-aux-routes"},"Donner un nom aux routes"),(0,r.kt)("p",null,"Quand vous \xeatre dans le d\xe9veloppement d'un gros projet, les routes deviendront nombreuses\net la gestion visuel pour le d\xe9veloppeur deviendra difficile, alors Bow vous permet de donner des noms \xe0 vos routes et pour apr\xe8s les contacter plus facilement. La m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," associate \xe0 une instance de route vous permet de faire \xe7a."),(0,r.kt)("p",null,"Prototype de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"name(name);\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Param\xe8tre"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"String")),(0,r.kt)("td",{parentName:"tr",align:null},"Le nom de la route")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/:name', function ($name)\n{\n  return 'Bonjour ' . $name;\n})->name('hello');\n")),(0,r.kt)("h3",{id:"association-de-middleware"},"Association de middleware"),(0,r.kt)("p",null,"Un middleware c'est un ou plusieurs actions qui ce placent entre la requ\xeate et l'action\n\xe0 ex\xe8cuter. Tout les Frameworks modernes en sont dot\xe9s."),(0,r.kt)("p",null,"Pour plus d'information sur le sujet, allez ce lien ",(0,r.kt)("a",{parentName:"p",href:"#documentation-middlewares"},"middleware")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/:name', ['middleware' => 'ip', function ($name)\n{\n  return 'Bonjour ' . $name;\n}]);\n\n// Ou\n$app->get('/:name', function ($name) {\n  return 'Bonjour ' . $name;\n})->middleware('ip');\n")),(0,r.kt)("h4",{id:"la-composition-daction"},"La composition d'action"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"$app->get('/:name', [\n  'middleware' => 'ip',\n  'controller' => 'NameController::action'\n]);\n")),(0,r.kt)("h2",{id:"il-manque-quelque-chose-"},"Il manque quelque chose ?"),(0,r.kt)("p",null,"Si vous rencontrez des probl\xe8mes avec la documentation ou si vous avez des suggestions pour am\xe9liorer la documentation ou le projet en g\xe9n\xe9ral, veuillez d\xe9poser une issue pour nous, ou envoyer un tweet mentionnant le compte Twitter @BowFramework ou sur directement sur le ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bowphp/docs/issues"},"github"),"."))}m.isMDXComponent=!0}}]);